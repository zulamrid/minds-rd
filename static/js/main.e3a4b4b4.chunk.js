(this["webpackJsonpminds-rd"]=this["webpackJsonpminds-rd"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(35),i=n.n(r),s=(n(97),n.p,n(62),n(8)),o=n(40),l=n(88),u=n(5),d=n(23),j=n(6),b={buttons:[],shapes:[],image:"",selected:"",image_shape:"",selected_shape:"",item:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BUTTON":return Object(j.a)(Object(j.a)({},e),{},{buttons:[].concat(Object(d.a)(e.buttons),[t.payload])});case"UPDATE_BUTTON":return Object(j.a)(Object(j.a)({},e),{},{buttons:e.buttons.map((function(e,n){return e.id===t.payload.index.id?Object(j.a)(Object(j.a)({},e),t.payload.value):e}))});case"UPDATE_DETAIL":return Object(j.a)(Object(j.a)({},e),{},{buttons:e.buttons.map((function(e,n){return e.id===t.payload.id?Object(j.a)(Object(j.a)({},e),{},Object(u.a)({},t.payload.key,t.payload.value)):e}))});case"DELETE_BUTTON":return Object(j.a)(Object(j.a)({},e),{},{buttons:e.buttons.filter((function(e,n){return n!==t.payload})),selected:""});case"SET_IMAGE":return Object(j.a)(Object(j.a)({},e),{},{image:t.payload});case"SELECTED":return Object(j.a)(Object(j.a)({},e),{},{selected:t.payload,item:"button"});case"REMOVE_BUTTON":case"EDIT_BUTTON":return Object(j.a)({},e);case"ADD_SHAPE":return Object(j.a)(Object(j.a)({},e),{},{shapes:[].concat(Object(d.a)(e.shapes),[t.payload])});case"UPDATE_SHAPE":return Object(j.a)(Object(j.a)({},e),{},{shapes:e.shapes.map((function(e,n){return e.id===t.payload.index.id?Object(j.a)(Object(j.a)({},e),t.payload.value):e}))});case"UPDATE_DETAIL_SHAPE":return Object(j.a)(Object(j.a)({},e),{},{shapes:e.shapes.map((function(e,n){return e.id===t.payload.id?Object(j.a)(Object(j.a)({},e),{},Object(u.a)({},t.payload.key,t.payload.value)):e}))});case"DELETE_SHAPE":return Object(j.a)(Object(j.a)({},e),{},{shapes:e.shapes.filter((function(e,n){return n!==t.payload})),selected_shape:""});case"SELECTED_SHAPE":return Object(j.a)(Object(j.a)({},e),{},{selected_shape:t.payload,item:"shape"});default:return e}},h=Object(o.b)({Main:O}),f=Object(o.c)(h,{},Object(o.a)(l.a)),p=n(11),g=n(17),x=n(215),y=n(4),E=window.innerWidth/2,m=window.innerHeight/2,v=function(e){var t=e.shapeProps,n=e.isSelected,c=e.onSelect,r=e.onChange,i=a.a.useRef(),s=a.a.useRef();return a.a.useEffect((function(){n&&(s.current.nodes([i.current]),s.current.getLayer().batchDraw())}),[n]),Object(y.jsxs)(a.a.Fragment,{children:[Object(y.jsx)(g.b,Object(j.a)(Object(j.a)({onClick:c,onTap:c,ref:i},t),{},{radius:"10px",draggable:!0,onDragEnd:function(e){r(Object(j.a)(Object(j.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=i.current,c=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(j.a)(Object(j.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*c),height:Math.max(n.height()*a)}))}})),n&&Object(y.jsx)(g.d,{ref:s,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})},T=function(e){var t=e.shapeProps,n=e.isSelected,c=e.onSelect,r=e.onChange,i=a.a.useRef(),s=a.a.useRef();return a.a.useEffect((function(){n&&(s.current.nodes([i.current]),s.current.getLayer().batchDraw())}),[n]),Object(y.jsxs)(a.a.Fragment,{children:[Object(y.jsx)(g.b,Object(j.a)(Object(j.a)({onClick:c,onTap:c,ref:i},t),{},{draggable:!0,onDragEnd:function(e){r(Object(j.a)(Object(j.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=i.current,c=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(j.a)(Object(j.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*c),height:Math.max(n.height()*a)}))}})),n&&Object(y.jsx)(g.d,{ref:s,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})};function S(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.Main.buttons})),c=Object(s.c)((function(e){return e.Main.shapes})),r=Object(s.c)((function(e){return e.Main.image}));a.a.useEffect((function(){}),[n,c]);var i=a.a.useState(n),o=Object(p.a)(i,2),l=(o[0],o[1],a.a.useState(null)),u=Object(p.a)(l,2),d=u[0],j=u[1],b=a.a.useState(null),O=Object(p.a)(b,2),h=O[0],f=O[1],x=function(e){e.target===e.target.getStage()&&(j(null),f(null),D())},S=function(){document.querySelector(".sidebar-right").style.right=0},D=function(){document.querySelector(".sidebar-right").style.right="-350px"};return Object(y.jsx)(g.c,{width:E,height:m,onMouseDown:x,onTouchStart:x,style:""!==r?{backgroundImage:"url(".concat(r,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"}:{backgroundColor:"white"},children:Object(y.jsxs)(g.a,{children:[n.map((function(e,c){return Object(y.jsx)(v,{shapeProps:e,onClick:function(){return alert(e.label)},isSelected:e.id===d,onSelect:function(){var n;j(e.id),f(null),console.log(c),t((n=c,function(e){e({type:"SELECTED",payload:n})})),S()},onChange:function(e){var a,r,i=n.slice();t((a=i[c],r=e,function(e){var t={index:a,value:r};console.log(t),e({type:"UPDATE_BUTTON",payload:t})}))}},c)})),c.map((function(e,n){return Object(y.jsx)(T,{shapeProps:e,isSelected:e.id===h,onSelect:function(){var c;f(e.id),j(null),t((c=n,function(e){e({type:"SELECTED_SHAPE",payload:c})})),S()},onChange:function(e){var a,r,i=c.slice();console.log(i),t((a=i[n],r=e,function(e){var t={index:a,value:r};console.log(t),e({type:"UPDATE_SHAPE",payload:t})}))}},n)}))]})})}n(103);function D(){var e=Object(s.c)((function(e){return e.Main.buttons})),t=Object(s.c)((function(e){return e.Main.shapes})),n=Object(s.c)((function(e){return e.Main.image}));return Object(y.jsxs)("div",{className:"sidebar",children:[Object(y.jsxs)("pre",{style:{color:"#fff"},children:["image: ",n]}),Object(y.jsxs)("pre",{style:{color:"#fff"},children:["buttons: ",JSON.stringify(e,null,2)]}),Object(y.jsxs)("pre",{style:{color:"#fff"},children:["shapes: ",JSON.stringify(t,null,2)]})]})}n(104),n(211);function w(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.Main.selected})),n=Object(s.c)((function(e){return e.Main.buttons})),c=a.a.useState(!1),r=Object(p.a)(c,2);r[0],r[1];a.a.useEffect((function(){console.log(t)}),[n]);var i=function(t,n,c,a){var r={index:t,key:n,value:c,id:a};setTimeout((function(){return e(function(e){return function(t){console.log(e),t({type:"UPDATE_DETAIL",payload:e})}}(r))}),1e3)};return Object(y.jsx)("div",{className:"sidebar-right",children:0!==n.length&&""!==t?Object(y.jsxs)("table",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"x"}),Object(y.jsx)("td",{children:" y "})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)("input",{defaultValue:n[t].y,onChange:function(e){return i(t,"y",e.target.value,n[t].id)}})}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{type:"text",name:"any2",defaultValue:n[t].x,onChange:function(e){return i(t,"x",e.target.value,n[t].id)}})})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Width"}),Object(y.jsx)("td",{children:"Height"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)("input",{defaultValue:n[t].height,onChange:function(e){return i(t,"height",parseInt(e.target.value),n[t].id)}})}),Object(y.jsx)("td",{children:Object(y.jsx)("input",{defaultValue:n[t].width,onChange:function(e){return i(t,"width",parseInt(e.target.value),n[t].id)}})})]}),Object(y.jsx)("tr",{children:Object(y.jsx)("td",{children:"Color"})}),Object(y.jsx)("tr",{children:Object(y.jsx)("td",{children:Object(y.jsx)("input",{defaultValue:n[t].fill,onChange:function(e){return i(t,"fill",e.target.value,n[t].id)}})})})]}):Object(y.jsx)(y.Fragment,{})})}var C=function(){var e=Object(s.b)(),t=a.a.useState(""),n=Object(p.a)(t,2),c=n[0],r=n[1],i=Object(s.c)((function(e){return e.Main.buttons})),o=Object(s.c)((function(e){return e.Main.selected})),l=Object(s.c)((function(e){return e.Main.selected_shape})),d=Object(s.c)((function(e){return e.Main.item}));a.a.useEffect((function(){console.log(l),console.log(o),console.log(d),console.log(i)}),[l,o,d,i]);var j=function(){var t;e((t=c,function(e){console.log(t),e({type:"SET_IMAGE",payload:t})})),r("")};return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("div",{className:"sidebar-container",children:Object(y.jsx)(D,{})}),Object(y.jsxs)("div",{className:"main",children:[Object(y.jsx)(S,{}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{display:"flex",width:"100%",marginTop:20,justifyContent:"flex-end"},children:""===d?Object(y.jsx)(y.Fragment,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"button",style:{width:"15%",margin:3,backgroundColor:"#0984e3"},onClick:j,children:"Clone"}),Object(y.jsx)("div",{className:"button",style:{width:"15%",margin:3,backgroundColor:"#d63031"},onClick:function(){e(function(e){return function(t){console.log(e),"button"===e.item?t({type:"DELETE_BUTTON",payload:e.selectedButton}):t({type:"DELETE_SHAPE",payload:e.selectedShape})}}({item:d,selectedButton:o,selectedShape:l}))},children:"Delete"})]})}),Object(y.jsxs)("div",{style:{display:"flex",width:"100%",marginTop:20},children:[Object(y.jsx)("input",{style:{padding:5,width:"80%",borderRadius:5,borderWidth:0},placeholder:"Paste image link here",value:c,onChange:function(e){return r(e.target.value)}}),Object(y.jsx)("div",{className:"button",style:{width:"15%",margin:3},onClick:j,children:"Save"})]}),Object(y.jsx)("div",{className:"button",onClick:function(){e((function(e){e({type:"ADD_BUTTON",payload:{x:10,y:10,width:180,height:80,label:"label1",fill:"#0984e3",id:Object(x.a)()}})}))},children:"Add button"}),Object(y.jsx)("div",{className:"button",onClick:function(){e((function(e){var t;e({type:"ADD_SHAPE",payload:(t={x:10,y:10,width:200,height:200,label:"shape1",fill:"#0984e3",opacity:.5,radius:10},Object(u.a)(t,"radius",70),Object(u.a)(t,"fill","red"),Object(u.a)(t,"stroke","black"),Object(u.a)(t,"strokeWidth",4),Object(u.a)(t,"shadowColor","black"),Object(u.a)(t,"shadowBlur",10),Object(u.a)(t,"shadowOffset",{x:10,y:10}),Object(u.a)(t,"shadowOpacity",.5),Object(u.a)(t,"id",Object(x.a)()),t)})}))},children:"Add Shape"}),Object(y.jsx)("div",{className:"button",children:"Add Text"}),Object(y.jsx)("div",{className:"button",children:"Add Image / Logo"})]})]}),Object(y.jsx)("div",{className:"sidebar-container",children:Object(y.jsx)(w,{})})]})};var A=function(){return Object(y.jsx)(s.a,{store:f,children:Object(y.jsx)(C,{})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,216)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(A,{})}),document.getElementById("root")),_()},62:function(e,t,n){},97:function(e,t,n){}},[[212,1,2]]]);
//# sourceMappingURL=main.e3a4b4b4.chunk.js.map